<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context API & Custom Hook Demo</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="./App.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
    //T·∫°o context v√† c√∫ ph√°p t·∫°o context 
    const ThemeContext = React.createContext();
    
    //t·∫°o 1 Custom hook L·∫•y k√≠ch th∆∞·ªõc m√†n h√¨nh 
    //quy ∆∞·ªõc ƒë·∫∑t t√™n l√† d√πng use ph√≠a tr∆∞·ªõc t√™n h√†m v√† c√°c t·ª´ ti·∫øp theo vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu (tu√¢n theo c√∫ ph√°p l·∫°c ƒë√†)
    function useWindowSize(){
        const [size,setSize] = React.useState(
            {
                width: window.innerWidth,
                height:window.innerHeight
            }
        );
        React.useEffect(() =>{
             const handleResize = ()=>{
                setSize(
                    {
                        width: window.innerWidth,
                        height:window.innerHeight
                    }
                )
             };
             window.addEventListener('resize',handleResize);
             return () => window.removeEventListener('resize',handleResize);
        },[] );
        return size;
    }
    // custom hook l·∫•y theme c·ªßa useContext
    // c√∫ ph√°p t·∫°o 
    function useTheme() {
        const context = React.useContext(ThemeContext);
        return context;
    }
       //component Paragraph (c√≥ s·ª≠ d·ª•ng l·∫°i custum hook)_____________________________
    function Paragraph (){
        const theme = useTheme();
        const {width,height} = useWindowSize();
        return(
            <p className = {theme}>
                Theme ƒëang s·ª≠ d·ª•ng :<strong>{theme}</strong>
                <br/>
                K√≠ch th∆∞·ªõc m√†n h√¨nh l√† :{width}px*{height}px 
                <br/>
                üåü Demo React Context API
                <br/>
                React Context API l√† m·ªôt c∆° ch·∫ø ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu xuy√™n su·ªët component tree m√† kh√¥ng c·∫ßn truy·ªÅn props th·ªß c√¥ng qua t·ª´ng c·∫•p.
            </p>
        )
    }
    //component Footer__________________________
    function Footer(){
        const {width} = useWindowSize();
        return(
            <div> 
                <h4>Chi·ªÅu r·ªông tr√¨nh duy·ªát: {width}px</h4>    
            </div>
        )
    }

    //component App _______________________________
    function App (){
        const [theme,setTheme] = React.useState('light');
        const toggleTheme = () =>{
            setTheme(theme==='light'?'dark':'light');
        };
        return(
          <ThemeContext.Provider value = {theme}>
            <div className = {theme}>
                <button onClick = {toggleTheme}>ƒê·ªïi m√†u n·ªÅn</button>
                <Paragraph/>  
                <Footer/>
            </div>
          </ThemeContext.Provider>
        );
    }
    ReactDOM.render(<App/>,document.getElementById('root'));
     </script>
    
</body>
</html>